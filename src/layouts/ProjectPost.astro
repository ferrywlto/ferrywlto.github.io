---
import FormattedDate from "../components/FormattedDate.astro";
import BaseLayout from "./BaseLayout.astro";
import TagRow from "../components/TagRow.astro";
import HeroImage from "../components/HeroImage.astro";
const { title, description, pubDate, updatedDate, heroImage, tags, repoUrl, projectUrl } =
  Astro.props;

const parent = '/projects';
---

<BaseLayout title={title} description={description}>
  <article class="width-constrained-container column-container">
    <div class="section-header-link">
      <a href={parent} class="text-small-link">
        &leftarrow; Back
      </a>
    </div>
    <HeroImage src={heroImage} alt={description} class="hero-image" />
    <div>
      <div class="title">
        <div class="date">
          {pubDate && <FormattedDate date={pubDate} />}
          {
            updatedDate && (
              <div class="last-updated-on text-meta">
                Last updated on <FormattedDate date={updatedDate} />
              </div>
            )
          }
        </div>
        <div>
          <div class="project-row row-to-column-on-mobile">
            <h1 class="text-section-title">{title}</h1>
            <div class="project-pill text-body">
              {(projectUrl && repoUrl) && (
                <a href={projectUrl} target="_blank" rel="noopener noreferrer" class="text-small-link">
                  <div class="ext-link project-visit">
                    Visit Project
                    <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" fill="none">
                      <path d="M14 3h7v7M21 3l-9 9" />
                      <path d="M21 21H5a2 2 0 0 1-2-2V5" />
                    </svg>
                  </div>
                </a>
                <span>&VerticalBar;</span>
                <a href={repoUrl} target="_blank" rel="noopener noreferrer" class="text-small-link">
                  <div class="ext-link github-repo">
                    GitHub
                    <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.41-1.34-1.79-1.34-1.79-1.09-.75.08-.74.08-.74 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49.99.11-.78.42-1.3.76-1.6-2.67-.3-5.48-1.33-5.48-5.9 0-1.3.47-2.36 1.24-3.19-.13-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.22a11.5 11.5 0 0 1 6 0c2.3-1.54 3.3-1.22 3.3-1.22.66 1.66.25 2.88.12 3.18.77.83 1.24 1.89 1.24 3.19 0 4.58-2.81 5.6-5.49 5.89.43.37.81 1.1.81 2.22v3.29c0 .32.21.7.83.58A12 12 0 0 0 12 .5Z"/>
                    </svg>
                  </div>
                </a>
              )}
            </div>
          </div>
          <hr />
        </div>
      </div>

      <slot />
      {tags && tags.length > 0 && (
      <div class="tags-container">
        <TagRow tags={tags} parent={`${parent}`} />
      </div>
      )}
    </div>
    <div class="section-header-link">
      <a href={`${parent}`} class="text-small-link">
        &leftarrow; Back
      </a>
    </div>
  </article>
</BaseLayout>
<style>
  .project-row {
    align-items: center;
    justify-content: space-between;
  }
  .project-pill {
    display: flex;
    align-items: center;
    gap: var(--gap-sm);
  }
  .project-pill a:hover {
    text-decoration: none;
  }
  .project-pill span {
    color: var(--color-thread);
  }
  .ext-link {
    display: flex;
    align-items: flex-start;
    gap: var(--gap-sm);
  }
  .project-visit svg path {
    stroke: currentColor;
    stroke-width: 2.5;
  }
  .github-repo svg path {
    fill: currentColor;
  }
  .column-container {
    padding: 0 var(--gap-lg);
    gap: var(--gap-lg);
  }
  .title {
    display: flex;
    flex-direction: column;
    margin-bottom: var(--gap-md);
    padding: var(--gap-md) 0;
    line-height: 1;
    gap: var(--gap-md);
  }
  .title h1 {
    margin: 0 0 var(--gap-sm) 0;
  }
  .date {
    display: flex;
    gap: var(--gap-md);
  }
  .last-updated-on {
    font-style: italic;
  }
  .tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: var(--gap-sm);
    margin-top: var(--gap-lg);
  }
  @media (max-width: 1024px) {
    .project-row {
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      gap: var(--gap-md);
    }
    .date {
      margin-bottom: var(--gap-sm);
    }
  }
</style>
