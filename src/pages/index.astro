---
import PostList from "../components/PostList.astro";
import ProjectList from "../components/ProjectList.astro";
import QuoteList from "../components/QuoteList.astro";
import SectionContainer from "../components/SectionContainer.astro";

import Divider from "../components/Divider.astro";
import HeroCard from "../components/HeroCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const blogs = (await getCollection("blogs"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3)
  .map((post) => ({
    title: post.data.title,
    date: post.data.pubDate.toString(),
    subtitle: post.data.description,
    link: `./blogs/${post.id}`,
  }));

const diary = [
  {
    title: "My First Diary Entry",
    date: "2024-06-10",
    subtitle: "I ate a delicious meal today!",
    link: "./diary/diary2",
  },
  {
    title: "My birthday",
    date: "2024-06-05",
    subtitle: "Celebrating another year of life!",
    link: "./diary/diary3",
  },
];

const quotes = [
  {
    author: "Einstein",
    date: "2024-06-12",
    text: "Life is like riding a bicycle. To keep your balance you must keep moving.",
    link: "./quote/quote1",
  },
  {
    author: "Winston Churchill",
    date: "2024-06-08",
    text: "Success is not final, failure is not fatal: It is the courage to continue that counts.",
    link: "./quote/quote2",
  },
];

const projects = [
  {
    name: "Personal Portfolio Website",
    tags: ["Astro", "CSS", "JavaScript"],
    lastUpdated: "2024-06-14",
    description: "A showcase of my work and skills.",
    link: "./project/project1",
  },
  {
    name: "E-commerce Platform",
    tags: [".NET", "Azure", "AI"],
    lastUpdated: "2024-06-12",
    description: "An online store for various products.",
    link: "./project/project2",
  },
  {
    name: "Blog Application",
    tags: ["Blazor", "MAUI", "Qdrant"],
    lastUpdated: "2024-06-10",
    description: "A platform to share articles and posts.",
    link: "./project/project3",
  },
];
---

<BaseLayout>
  <main class="width-constrained-container column-container wrapper">
    <HeroCard />
    <Divider />

    <div class="content-container">
      <div class="column-container content-list">
        <SectionContainer title="Tech Blog" linkText="All posts" link="./blogs">
          <PostList posts={blogs} />
        </SectionContainer>

        <SectionContainer title="Diary" linkText="Archive" link="./diaries">
          <PostList posts={diary} />
        </SectionContainer>

        <SectionContainer title="Quotes" linkText="Archive" link="./quotes">
          <QuoteList quotes={quotes} />
        </SectionContainer>

        <SectionContainer
          title="Projects"
          linkText="All projects"
          link="./projects"
        >
          <ProjectList projects={projects} />
        </SectionContainer>
      </div>
    </div>
  </main>
</BaseLayout>
<style>
  @import "../styles/spacing.css";
  @import "../styles/layout.css";

  .wrapper {
    gap: var(--gap-lg);
  }

  .content-list {
    gap: var(--gap-xl);
  }

  .content-container {
    padding: var(--gap-lg);
  }
</style>
